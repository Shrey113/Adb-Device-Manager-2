<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Intro Video Tutorial</title>
  <link rel="stylesheet" href="./info_data.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', 'Segoe UI', sans-serif;
    }
  </style>
</head>

<body>
  <div class="container">
    <!-- Left Sidebar with Video Titles -->
    <aside class="sidebar">
      <div class="sidebar-box">
        <div class="nav-track">
          <div class="nav-dots" id="navDots"></div>
        </div>
        <ul class="video-titles" id="videoTitles"></ul>
      </div>
    </aside>

    <!-- Main Video Area -->
    <main class="main-video">
      <video id="videoPlayer" autoplay muted playsinline></video>

      <!-- Helpful Links Section - Shows for USB Debugging video -->
      <div class="helpful-links-section" id="helpfulLinksSection" style="display: none;">
        <h3>
          <span class="icon">ğŸ”—</span>
          USB Debugging Guides by Brand
        </h3>
        <div class="links-grid">
          <a href="https://help.airdroid.com/hc/en-us/articles/360045329413-How-to-Enable-USB-debugging-on-Xiaomi"
            target="_blank" rel="noopener" class="brand-link xiaomi">
            <span class="brand-icon">ğŸ“±</span>
            <span>Xiaomi</span>
            <span class="external-icon">â†—</span>
          </a>
          <a href="https://help.airdroid.com/hc/en-us/articles/360044847394-How-to-Enable-USB-debugging-on-Huawei"
            target="_blank" rel="noopener" class="brand-link huawei">
            <span class="brand-icon">ğŸ“±</span>
            <span>Huawei</span>
            <span class="external-icon">â†—</span>
          </a>
          <a href="https://help.airdroid.com/hc/en-us/articles/360045374013-How-to-Enable-USB-debugging-on-Samsung"
            target="_blank" rel="noopener" class="brand-link samsung">
            <span class="brand-icon">ğŸ“±</span>
            <span>Samsung</span>
            <span class="external-icon">â†—</span>
          </a>
          <a href="https://help.airdroid.com/hc/en-us/articles/360045661674-How-to-Enable-USB-debugging-on-Vivo"
            target="_blank" rel="noopener" class="brand-link vivo">
            <span class="brand-icon">ğŸ“±</span>
            <span>Vivo</span>
            <span class="external-icon">â†—</span>
          </a>
          <a href="https://help.airdroid.com/hc/en-us/articles/360045202593-How-to-Enable-USB-debugging-on-Smartisan"
            target="_blank" rel="noopener" class="brand-link smartisan">
            <span class="brand-icon">ğŸ“±</span>
            <span>Smartisan</span>
            <span class="external-icon">â†—</span>
          </a>
        </div>
      </div>

      <!-- Video Controls -->
      <div class="video-controls">
        <button id="playPauseBtn" class="play-btn">
          <span id="playIcon">â¸</span>
        </button>
        <span id="currentTime">0:00</span>
        <div class="progress-container" id="progressContainer">
          <div class="progress-bar-bg">
            <div class="progress-bar-fill" id="progressFill"></div>
            <div class="progress-bar-thumb" id="progressThumb"></div>
          </div>
        </div>
        <span id="totalTime">0:00</span>
      </div>
    </main>
  </div>

  <script>
    // Video data with URL hash IDs for deep linking
    const videos = [
      { src: "./../images/videos/test_1.mp4", title: "1. How to Add New Devices", hasLinks: false, id: "add_devices" },
      { src: "./../images/videos/test_2.mp4", title: "2. How to Turn On USB Debugging", hasLinks: true, id: "usb_debugging" },
      { src: "./../images/videos/test_3.mp4", title: "3. How to Connect via ADB", hasLinks: false, id: "connect_adb" },
      { src: "./../images/videos/test_4.mp4", title: "4. How to Connect via App Mode", hasLinks: false, id: "app_mode" },
      { src: "./../images/videos/test_5.mp4", title: "5. How to Fix Desktop Connection", hasLinks: false, id: "fix_desktop_connection" }
    ];

    const videoPlayer = document.getElementById("videoPlayer");
    const titlesContainer = document.getElementById("videoTitles");
    const dotsContainer = document.getElementById("navDots");
    const progressContainer = document.getElementById("progressContainer");
    const progressFill = document.getElementById("progressFill");
    const progressThumb = document.getElementById("progressThumb");
    const currentTimeEl = document.getElementById("currentTime");
    const totalTimeEl = document.getElementById("totalTime");
    const playPauseBtn = document.getElementById("playPauseBtn");
    const playIcon = document.getElementById("playIcon");
    const helpfulLinksSection = document.getElementById("helpfulLinksSection");

    let currentIndex = 0;

    // Create sidebar items
    videos.forEach((video, index) => {
      const li = document.createElement("li");
      li.textContent = video.title;
      li.dataset.id = video.id;
      li.addEventListener("click", () => {
        switchVideo(index);
        updateUrlHash(video.id);
      });
      titlesContainer.appendChild(li);

      const dot = document.createElement("div");
      dot.addEventListener("click", () => {
        switchVideo(index);
        updateUrlHash(video.id);
      });
      dotsContainer.appendChild(dot);
    });

    // Update URL hash when switching videos
    function updateUrlHash(id) {
      history.replaceState(null, null, '#' + id);
    }

    // Get video index from URL hash
    function getIndexFromHash() {
      const hash = window.location.hash.slice(1); // Remove #
      if (hash) {
        const index = videos.findIndex(v => v.id === hash);
        if (index !== -1) return index;
      }
      return 0; // Default to first video
    }

    function switchVideo(index) {
      currentIndex = index;
      videoPlayer.src = videos[index].src;
      videoPlayer.play();
      updateActive();
      updateHelpfulLinks();
      updateProgress(0);
      playIcon.textContent = "â¸";
    }

    function updateActive() {
      document.querySelectorAll(".video-titles li").forEach((el, i) => {
        el.classList.toggle("active", i === currentIndex);
      });
      document.querySelectorAll(".nav-dots div").forEach((el, i) => {
        el.classList.toggle("active", i === currentIndex);
      });
    }

    function updateHelpfulLinks() {
      if (videos[currentIndex].hasLinks) {
        helpfulLinksSection.style.display = "block";
      } else {
        helpfulLinksSection.style.display = "none";
      }
    }

    function updateProgress(percent) {
      progressFill.style.width = percent + '%';
      progressThumb.style.left = percent + '%';
    }

    function formatTime(seconds) {
      if (isNaN(seconds)) return "0:00";
      const m = Math.floor(seconds / 60);
      const s = Math.floor(seconds % 60);
      return `${m}:${s.toString().padStart(2, "0")}`;
    }

    videoPlayer.addEventListener("loadedmetadata", () => {
      totalTimeEl.textContent = formatTime(videoPlayer.duration);
    });

    videoPlayer.addEventListener("timeupdate", () => {
      if (videoPlayer.duration) {
        const percent = (videoPlayer.currentTime / videoPlayer.duration) * 100;
        updateProgress(percent);
        currentTimeEl.textContent = formatTime(videoPlayer.currentTime);
      }
    });

    videoPlayer.addEventListener("ended", () => {
      currentIndex = (currentIndex + 1) % videos.length;
      switchVideo(currentIndex);
      updateUrlHash(videos[currentIndex].id);
    });

    // Progress bar click to seek
    progressContainer.addEventListener("click", (e) => {
      const rect = progressContainer.getBoundingClientRect();
      const percent = ((e.clientX - rect.left) / rect.width) * 100;
      const newTime = (percent / 100) * videoPlayer.duration;
      videoPlayer.currentTime = newTime;
      updateProgress(percent);
    });

    // Progress bar drag
    let isDragging = false;

    progressThumb.addEventListener("mousedown", (e) => {
      isDragging = true;
      e.preventDefault();
    });

    document.addEventListener("mousemove", (e) => {
      if (isDragging) {
        const rect = progressContainer.getBoundingClientRect();
        let percent = ((e.clientX - rect.left) / rect.width) * 100;
        percent = Math.max(0, Math.min(100, percent));
        updateProgress(percent);
        videoPlayer.currentTime = (percent / 100) * videoPlayer.duration;
      }
    });

    document.addEventListener("mouseup", () => {
      isDragging = false;
    });

    // Touch support for mobile
    progressContainer.addEventListener("touchstart", (e) => {
      const rect = progressContainer.getBoundingClientRect();
      const percent = ((e.touches[0].clientX - rect.left) / rect.width) * 100;
      const newTime = (Math.max(0, Math.min(100, percent)) / 100) * videoPlayer.duration;
      videoPlayer.currentTime = newTime;
      updateProgress(Math.max(0, Math.min(100, percent)));
    });

    progressContainer.addEventListener("touchmove", (e) => {
      const rect = progressContainer.getBoundingClientRect();
      let percent = ((e.touches[0].clientX - rect.left) / rect.width) * 100;
      percent = Math.max(0, Math.min(100, percent));
      updateProgress(percent);
      videoPlayer.currentTime = (percent / 100) * videoPlayer.duration;
    });

    playPauseBtn.addEventListener("click", (e) => {
      e.stopPropagation();
      togglePlayPause();
    });

    videoPlayer.addEventListener("click", togglePlayPause);

    function togglePlayPause() {
      if (videoPlayer.paused) {
        videoPlayer.play();
        playIcon.textContent = "â¸";
      } else {
        videoPlayer.pause();
        playIcon.textContent = "â–¶ï¸";
      }
    }

    // Handle hash change (when user navigates with browser back/forward)
    window.addEventListener("hashchange", () => {
      const index = getIndexFromHash();
      if (index !== currentIndex) {
        switchVideo(index);
      }
    });

    // Initialize with URL hash or first video
    const initialIndex = getIndexFromHash();
    switchVideo(initialIndex);
    if (videos[initialIndex].id) {
      updateUrlHash(videos[initialIndex].id);
    }
  </script>
</body>

</html>